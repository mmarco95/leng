<html>
<script type="text/javascript" src="chart.js"></script>

<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>

<link rel="stylesheet" type="text/css" href="bulma.css">

<head>
    <style>
        body {
            margin: 0;
            padding: 0;
        }

        #corpo {
            width: 100%;
            height: 100%;
        }

        /* #cane{
                width:20%;
                height:20%;
                float: left;            
            }

            #gatto{
                width:20%;
                height:20%;
                float: left;           
            }    */

        .title {
            font-weight: bold;
            font-size: 20px;
        }

        .container {
            height: 80%;
            width: 100%;
        }

        .navbar {
            background-color: orange;
        }
    </style>
</head>

<body>

    <!--<div id="cane">
            <canvas id="myChart" width="100" height="100"></canvas>
        </div>-->

    <!--<div id="gatto">
            <canvas id="myChart2" width="100" height="100"></canvas>
        </div>-->
    <div id="corpo">
        <nav class="navbar" role="navigation" aria-label="main navigation">
            <div class="navbar-brand">
                <a class="navbar-item" href="http://www.iprase.tn.it/">
                    <img src="logo.png" width="112" height="30">
                </a>
            </div>
        </nav>

        <div class="container">
            <p align="center">TEDESCO A1</p>
            <div class="tile is-ancestor">
                <div class="tile is-parent">
                    <article class="tile is-child box">
                        <p class="title">Lessico</p>
                        <br>
                        <canvas id="myChart"></canvas>
                    </article>
                </div>

                <div class="tile is-parent">
                    <article class="tile is-child box">
                        <p class="title">Correttezza competenze formali</p>
                        <br>
                        <canvas id="myChart2"></canvas>
                    </article>
                </div>

                <div class="tile is-parent">
                    <article class="tile is-child box">
                        <p class="title">Correttezza competenze formali</p>
                        <br>
                        <canvas id="myChart3"></canvas>
                    </article>
                </div>
            </div>
        </div>
    </div>
</body>

<script>

    let lingua = "porco dio non so programmare";
    let anno = "fbk di merda";
    let fileName = `${lingua}-${anno}.json`;

    console.log(fileName)

    fetch('data.json')
        .then(resp => resp.json())
        .then(json => {
            console.log(json)
            createGraph("myChart", json)
        })

    function createGraph(div, data) {
        var ctx = document.getElementById(div);

        let campo = "frequency"

        var myChart = new Chart(ctx, {
            type: 'bar',
            data: {
                labels: data.map(obj => obj.livello),
                datasets: [{
                    label: '# of Votes',
                    data: data.map(obj => obj[campo]),
                    backgroundColor: [
                        'rgba(255, 0, 0, 0.8)',
                        'rgba(255, 128, 0, 0.8)',
                        'rgba(51, 255, 51, 0.8)',

                    ],
                    borderColor: [
                        'rgba(255, 0, 0, 1)',
                        'rgba(255, 128, 0, 1)',
                        'rgba(51, 255, 51, 1)',
                    ],
                    borderWidth: 1
                }]
            },
            options: {
                scales: {
                    yAxes: [{
                        ticks: {
                            beginAtZero: true
                        }
                    }]
                },

                legend: {
                    display: false
                },
                tooltips: {
                    callbacks: {
                        label: function (tooltipItem) {
                            return tooltipItem.yLabel;
                        }
                    }
                }
            }
        });

        // var ctx = document.getElementById("myChart2");
        // var myChart = new Chart(ctx, {
        //     type: 'bar',
        //     data: {
        //         labels: ["0", "2", "4"],
        //         datasets: [{
        //             label: '# of Votes',
        //             data: [621, 339, 55],
        //             data: [621, 339, 55],
        //             backgroundColor: [
        //                 'rgba(255, 0, 0, 0.8)',
        //                 'rgba(255, 128, 0, 0.8)',
        //                 'rgba(51, 255, 51, 0.8)',

        //             ],
        //             borderColor: [
        //                 'rgba(255, 0, 0, 1)',
        //                 'rgba(255, 128, 0, 1)',
        //                 'rgba(51, 255, 51, 1)',
        //             ],
        //             borderWidth: 1
        //         }]
        //     },
        //     options: {
        //         scales: {
        //             yAxes: [{
        //                 ticks: {
        //                     beginAtZero: true
        //                 }
        //             }]
        //         },

        //         legend: {
        //             display: false
        //         },
        //         tooltips: {
        //             callbacks: {
        //                 label: function (tooltipItem) {
        //                     return tooltipItem.yLabel;
        //                 }
        //             }
        //         }
        //     }
        // });

        // var ctx = document.getElementById("myChart3");
        // var myChart = new Chart(ctx, {
        //     type: 'bar',
        //     data: {
        //         labels: ["0", "2", "4"],
        //         datasets: [{
        //             label: '# of Votes',
        //             data: [529, 369, 117],
        //             backgroundColor: [
        //                 'rgba(255, 0, 0, 0.8)',
        //                 'rgba(255, 128, 0, 0.8)',
        //                 'rgba(51, 255, 51, 0.8)',

        //             ],
        //             borderColor: [
        //                 'rgba(255, 0, 0, 1)',
        //                 'rgba(255, 128, 0, 1)',
        //                 'rgba(51, 255, 51, 1)',
        //             ],
        //             borderWidth: 1
        //         }]
        //     },
        //     options: {
        //         scales: {
        //             yAxes: [{
        //                 ticks: {
        //                     beginAtZero: true
        //                 }
        //             }]
        //         },

        //         legend: {
        //             display: false
        //         },
        //         tooltips: {
        //             callbacks: {
        //                 label: function (tooltipItem) {
        //                     return tooltipItem.yLabel;
        //                 }
        //             }
        //         }
        //     }
        // });
    }
</script>

</html>